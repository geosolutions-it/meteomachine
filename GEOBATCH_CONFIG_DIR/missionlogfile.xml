<?xml version="1.0" encoding="UTF-8"?>
<FlowConfiguration>
	
	<id>missionlogfile</id>
	<description>Gliders Mission Logs configuration flow</description>
	<name>Gliders Mission Logs flow</name>
	
	<maxStoredConsumers>10</maxStoredConsumers>
	
	<!-- to have a single istance, corePoolSize must be 2 -->
	<corePoolSize>10</corePoolSize>
	<maximumPoolSize>10</maximumPoolSize>
	<workQueueSize>100</workQueueSize>
	<keepAliveTime>150</keepAliveTime>
	<autorun>true</autorun>
	
	<EventGeneratorConfiguration>
		<wildCard>*.mlg</wildCard>
		<watchDirectory>missionlogfile/in</watchDirectory>
		<osType>OS_UNDEFINED</osType>
		<eventType>FILE_ADDED</eventType>
		<interval>0/10 * * * * ?</interval><!-- CRON: every 10 sec -->
		<!--<interval>20</interval> each 20 sec -->
		<id>GlidersMissionLogsFlow</id>
		<serviceID>fsEventGeneratorService</serviceID>
		<description>Gliders Mission Logs event generator description</description>
		<name>MissionLogs</name>
	</EventGeneratorConfiguration>
	
	<EventConsumerConfiguration>
		<id>missionlogfile</id>
		<description>missionlogfile</description>
		<name>missionlogfile</name>
		
		<performBackup>true</performBackup>
		
		<MissionLogsConfiguration>
			<serviceID>MissionLogsGeneratorService</serviceID>
			<id>MissionLogsGeneratorService</id>
			<description>MissionLogs Action</description>
			<name>MissionLogsConfiguration</name>		

			<cruiseName>NOMR12</cruiseName>
			<geostoreURL>http://localhost:8080/geostore-gliders/rest</geostoreURL>
			<geostoreUs>admin</geostoreUs>
	        <geostorePw>admin</geostorePw>
			<timePattern>EEE MMM dd HH:mm:ss yyyy</timePattern> <!-- US locale -->
			<categoryName>MISSION-LOGFILE</categoryName>	
            <cruiseDir>/home/nurc/logfile_data/mlg</cruiseDir>   <!-- ??? -->
			<keywords>ABORT,ERROR,^R,^F,^C,GliderDos A,GliderDos N,GliderDos I,run,sequence,initial.mi,lastgasp.mi,!type,callback,GPS fix is getting stale:,type,DRIVER_ODDITY,DRIVER_WARNING,DRIVER_ERROR</keywords>
		</MissionLogsConfiguration>
		
		<MoveConfiguration>
			<serviceID>MoveGeneratorService</serviceID>
			<id>MoveGeneratorService</id>
			<description>Move file</description>			
			<name>MoveConfiguration</name>
			
			<destination>/home/nurc/logfile_data/mlg</destination>
			<timeout>1000</timeout>
		</MoveConfiguration>
		
	</EventConsumerConfiguration>

</FlowConfiguration>