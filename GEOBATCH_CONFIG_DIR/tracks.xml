<?xml version="1.0" encoding="UTF-8"?>
<FlowConfiguration>
	
	<id>tracks</id>
	<description>Gliders Tracks configuration flow</description>
	<name>Gliders Tracks ingest flow</name>
	
	<maxStoredConsumers>10</maxStoredConsumers>
	
	<!-- to have a single istance, corePoolSize must be 2 -->
	<corePoolSize>10</corePoolSize>
	<maximumPoolSize>10</maximumPoolSize>
	<workQueueSize>100</workQueueSize>
	<keepAliveTime>150</keepAliveTime>
	<autorun>true</autorun>
	
	<EventGeneratorConfiguration>
		<wildCard>*.*</wildCard>
		<watchDirectory>tracks/in</watchDirectory>
		<osType>OS_UNDEFINED</osType>
		<eventType>FILE_ADDED</eventType>
		<interval>0/10 * * * * ?</interval><!-- CRON: every 10 sec -->
		<!--<interval>20</interval> each 20 sec -->
		<id>GlidersTracksFlow</id>
		<serviceID>fsEventGeneratorService</serviceID>
		<description>Gliders Tracks event generator description</description>
		<name>Tracks</name>
	</EventGeneratorConfiguration>
	
	<EventConsumerConfiguration>
		<id>tracks</id>
		<description>tracks</description>
		<name>tracks</name>
		
		<performBackup>false</performBackup>
		
		<TracksIngestConfiguration>
			<serviceID>TracksIngestGeneratorService</serviceID>
			<id>TracksIngestGeneratorService</id>
			<description>TracksIngest action</description>
			<name>TracksIngestConfiguration</name>
			<listenerConfigurations/>
			<failIgnored>false</failIgnored>
			
			<wpsServiceCapabilitiesURL>http://localhost:8181/geoserver/ows?service=wps&amp;version=1.0.0&amp;request=GetCapabilities</wpsServiceCapabilitiesURL>
			<wpsProcessIdentifier>gs:KMZGliders</wpsProcessIdentifier>
			<targetWorkspace>it.geosolutions</targetWorkspace>
			<targetDataStore>nurc_gliders</targetDataStore>
			
		    <aoiKmzFormatOptions>SUPEROVERLAY:false;KMPLACEMARK:false;KMSCORE:100;KMATTR:true;</aoiKmzFormatOptions>
			<aoiKmzStyles>GlidersPoints,aoi</aoiKmzStyles>
			<aoiKmzLayers>it.geosolutions:GlidersPoints,it.geosolutions:aoi</aoiKmzLayers>
			<gsBaseUrl>http://localhost:8181/geoserver/</gsBaseUrl>		

			<wpsHTTPClientUser>admin</wpsHTTPClientUser>
			<wpsHTTPClientPassword>1nurc2</wpsHTTPClientPassword>
			<wpsHTTPClientConnectionTimeout>300</wpsHTTPClientConnectionTimeout>
			<wpsHTTPClientReadTimeout>300</wpsHTTPClientReadTimeout>
		</TracksIngestConfiguration>
		
		<SendMailConfiguration>
			<serviceID>SendMailGeneratorService</serviceID>
			<id>SendMailGeneratorService</id>
			<description>SendMail action</description>
			<name>SendMailConfiguration</name>
			
			<mailSubject>WARNING - A glider outside the area of interest</mailSubject>
			
			<mailSmtpHost>smtp.gmail.com</mailSmtpHost>
			<mailSmtpStarttlsEnable>true</mailSmtpStarttlsEnable>   
			<mailSmtpAuth>true</mailSmtpAuth>                       
			<mailSmtpPort>587</mailSmtpPort>                        
			
			<mailAuthUsername>nurc.portal.test@gmail.com</mailAuthUsername> 
			<mailAuthPassword>Crociera100!</mailAuthPassword>               
			
			<mailToAddress>ilcovo@gmail.com</mailToAddress>
			<mailFromAddress>nurc.portal.test@gmail.com</mailFromAddress>
			
			<!-- Possible NURC configuration
			#mail.smtp.host=mail-smtp.nurc.nato.int
			#mail.smtp.auth=false
			#mail.smtp.port=25
			#
			#username=cimino@nurc.nato.int
			#fromAddress=noreply
			#toAdminAddress=cimino@nurc.nato.int
			#subject=Nurc Activation Proce
			-->
			
		</SendMailConfiguration>
		
	</EventConsumerConfiguration>

</FlowConfiguration>