<?xml version="1.0" encoding="UTF-8"?>
<FlowConfiguration>
	
	<id>predictions</id>
	<description>Gliders Predictions configuration flow</description>
	<name>Gliders Predictions ingest flow</name>
	
	<maxStoredConsumers>10</maxStoredConsumers>
	
	<!-- to have a single istance, corePoolSize must be 2 -->
	<corePoolSize>10</corePoolSize>
	<maximumPoolSize>10</maximumPoolSize>
	<workQueueSize>100</workQueueSize>
	<keepAliveTime>150</keepAliveTime>
	<autorun>true</autorun>
	
	<EventGeneratorConfiguration>
		<wildCard>*.*</wildCard>
		<watchDirectory>predictions/in</watchDirectory>
		<osType>OS_UNDEFINED</osType>
		<eventType>FILE_ADDED</eventType>
		<interval>0/10 * * * * ?</interval><!-- CRON: every 10 sec -->
		<!--<interval>20</interval> each 20 sec -->
		<id>GlidersPredictionsFlow</id>
		<serviceID>fsEventGeneratorService</serviceID>
		<description>Gliders Predictions event generator description</description>
		<name>Predictions</name>
	</EventGeneratorConfiguration>
	
	<EventConsumerConfiguration>
		<id>predictions</id>
		<description>predictions</description>
		<name>predictions</name>
		
		<performBackup>false</performBackup>
		
		<PredictionsIngestConfiguration>
			<serviceID>PredictionsIngestGeneratorService</serviceID>
			<id>PredictionsIngestGeneratorService</id>
			<description>PredictionsIngest action</description>
			<name>PredictionsIngestConfiguration</name>
			<listenerConfigurations/>
			<failIgnored>false</failIgnored>
			
			<wpsServiceCapabilitiesURL>http://localhost:8080/geoserver/ows?service=wps&amp;version=1.0.0&amp;request=GetCapabilities</wpsServiceCapabilitiesURL>
			<wpsProcessIdentifier>gs:KMZPredictions</wpsProcessIdentifier>
			<targetCruise>Rep11b</targetCruise>
			<targetGliderRegex><![CDATA[(?<=_)(.*)(?=_)]]></targetGliderRegex>
			<targetWorkspace>it.geosolutions</targetWorkspace>
			<targetDataStore>nurc_gliders</targetDataStore>
			
		</PredictionsIngestConfiguration>
		
	</EventConsumerConfiguration>

</FlowConfiguration>